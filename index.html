<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>S.M DOSA â€” Order Menu</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Merriweather:wght@300;400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#061224; --card:#071426; --muted:#9aa4b2; --accent:#ff7a59; --accent-2:#ff9b7f;
    --radius:12px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#03111a,#071426);color:#eef8ff;padding:14px}
  .wrap{max-width:1100px;margin:0 auto}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{font-family:Poppins;font-weight:700;font-size:20px}
  .subtitle{color:var(--muted);font-size:13px}
  /* tabs */
  .tabs{display:flex;gap:8px;margin:14px 0;overflow:auto;padding-bottom:8px}
  .tab{flex:0 0 auto;padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
  .tab.active{background:linear-gradient(90deg,#0d2f36,#123d44);box-shadow:0 8px 20px rgba(0,0,0,0.5)}
  .tab .t{font-family:Poppins;font-weight:600}
  /* layout */
  .main{display:flex;gap:18px}
  .menu{flex:1;min-width:0}
  .cart{width:340px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)}
  .category-title{font-family:Poppins;font-size:18px;margin:6px 0 12px}
  .item{display:flex;justify-content:space-between;align-items:flex-start;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.004));margin-bottom:12px;border:1px solid rgba(255,255,255,0.02)}
  .iname{font-family:Merriweather,serif;font-size:16px;margin:0}
  .idesc{color:var(--muted);font-size:13px;margin-top:6px}
  .price{font-family:Poppins;font-weight:700}
  .add-btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:0;color:white;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:600}
  /* cart */
  .cart h3{margin:6px 0 12px;font-family:Poppins}
  .cart-list{max-height:420px;overflow:auto}
  .cart-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}
  .qty{display:flex;gap:6px;align-items:center}
  .qty button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit;padding:4px 8px;border-radius:6px;cursor:pointer}
  .total{display:flex;justify-content:space-between;align-items:center;margin-top:12px;font-weight:700;font-family:Poppins}
  .checkout{width:100%;margin-top:12px;padding:10px;border-radius:8px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;font-weight:700;cursor:pointer}
  .empty{color:var(--muted);font-size:14px;padding:18px;text-align:center}
  @media (max-width:900px){
    .main{flex-direction:column}
    .cart{width:100%}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="brand">S.M DOSA</div>
        <div class="subtitle">Crispy dosas â€¢ Fresh shakes â€¢ Quick orders</div>
      </div>
      <div class="subtitle" id="tableHint">Order online â€” your cart saves locally</div>
    </header>

    <div class="tabs" id="tabs"></div>

    <div class="main" style="margin-top:8px">
      <div class="menu">
        <div id="itemsStage"></div>
      </div>

      <aside class="cart" id="cartBox">
        <h3>Your Order</h3>
        <div class="cart-list" id="cartList">
          <div class="empty">Cart is empty â€” add items to order</div>
        </div>
        <div class="total" id="totalRow" style="display:none">
          <div>Total</div>
          <div id="totalAmt">â‚¹0</div>
        </div>
        <button id="checkoutBtn" class="checkout" style="display:none">Checkout</button>
      </aside>
    </div>
  </div>

<script>
/* ---------- Public menu (edit if needed) ---------- */
const MENU = {
  "restaurant": "S.M DOSA",
  "categories": [
    {"name":"Main Course","items":[
      {"name":"IDLI (2 pcs.)","price":40,"desc":"Soft steamed idli â€” light and fluffy"},
      {"name":"Masala Dosa","price":80,"desc":"Crispy dosa filled with spiced potato"},
      {"name":"Plain Dosa","price":60,"desc":"Classic golden dosa"},
      {"name":"Paneer Masala Dosa","price":80,"desc":"Dosa with spicy paneer filling"}
    ]},
    {"name":"Shakes","items":[
      {"name":"Chocolate Shake","price":80,"desc":"Creamy chocolate shake topped with cream"},
      {"name":"Mango Shake","price":60,"desc":"Fresh mango blended with milk"},
      {"name":"KitKat Shake","price":80,"desc":"KitKat pieces with thick shake"},
      {"name":"Kiwi Shake","price":90,"desc":"Refreshing kiwi & milk"}
    ]},
    {"name":"Dessert","items":[
      {"name":"Butterscotch Ice Cream","price":40,"desc":"Rich butterscotch flavour"},
      {"name":"American Nuts","price":40,"desc":"Crunchy nutty treat"},
      {"name":"Choco Chips","price":40,"desc":"Chocolate chip delight"}
    ]}
  ]
};
/* ----------------------------------------------------------------- */

const tabsEl = document.getElementById('tabs');
const itemsStage = document.getElementById('itemsStage');
const cartList = document.getElementById('cartList');
const totalRow = document.getElementById('totalRow');
const totalAmt = document.getElementById('totalAmt');
const checkoutBtn = document.getElementById('checkoutBtn');

let activeIndex = 0;
let cart = {}; // { key: {name, price, qty} }

// helpers
function titleCase(s){ return (s||'').split(' ').map(w=> w? w[0].toUpperCase()+w.slice(1).toLowerCase(): '').join(' '); }
function emojiFor(name){
  const k = (name||'').toLowerCase();
  if(k.includes('shake')) return 'ðŸ¥¤';
  if(k.includes('dosa')) return 'ðŸ¥ž';
  if(k.includes('dessert')||k.includes('ice')) return 'ðŸ¨';
  return 'ðŸ½ï¸';
}

// render tabs
function renderTabs(){
  tabsEl.innerHTML = '';
  MENU.categories.forEach((cat, idx) => {
    const tab = document.createElement('div'); tab.className='tab';
    if(idx===activeIndex) tab.classList.add('active');
    tab.innerHTML = `<div class="t">${emojiFor(cat.name)} ${titleCase(cat.name)}</div>`;
    tab.onclick = ()=>{ activeIndex=idx; renderStage(); renderTabs(); window.scrollTo({top:120,behavior:'smooth'}); };
    tabsEl.appendChild(tab);
  });
}

// render category items
function renderStage(){
  itemsStage.innerHTML = '';
  MENU.categories.forEach((cat, idx)=>{
    const section = document.createElement('section');
    section.style.minHeight = '10px';
    const heading = document.createElement('div'); heading.className='category-title'; heading.textContent = `${emojiFor(cat.name)}  ${titleCase(cat.name)} `;
    section.appendChild(heading);

    const list = document.createElement('div');
    (cat.items || []).forEach(it=>{
      const card = document.createElement('div'); card.className='item';
      const left = document.createElement('div'); left.style.flex='1';
      const name = document.createElement('div'); name.className='iname'; name.textContent = it.name;
      const desc = document.createElement('div'); desc.className='idesc'; desc.textContent = it.desc || '';
      left.appendChild(name); left.appendChild(desc);
      const right = document.createElement('div'); right.style.textAlign='right';
      const price = document.createElement('div'); price.className='price'; price.textContent = 'â‚¹' + it.price;
      const btn = document.createElement('div'); btn.style.marginTop='8px';
      const add = document.createElement('button'); add.className='add-btn'; add.textContent='Add';
      add.onclick = ()=> addToCart(it);
      btn.appendChild(add);
      right.appendChild(price); right.appendChild(btn);
      card.appendChild(left); card.appendChild(right);
      list.appendChild(card);
    });

    section.appendChild(list);
    // only show active category by sliding (keep others hidden)
    if(idx !== activeIndex) section.style.display = 'none';
    itemsStage.appendChild(section);
  });
}

// cart functions
function addToCart(item){
  const key = item.name;
  if(!cart[key]) cart[key] = { name: item.name, price: Number(item.price), qty: 0 };
  cart[key].qty += 1;
  saveCart(); renderCart();
}
function changeQty(key, delta){
  if(!cart[key]) return;
  cart[key].qty += delta;
  if(cart[key].qty <= 0) delete cart[key];
  saveCart(); renderCart();
}
function renderCart(){
  cartList.innerHTML = '';
  const keys = Object.keys(cart);
  if(keys.length === 0){
    cartList.innerHTML = '<div class="empty">Cart is empty â€” add items to order</div>';
    totalRow.style.display = 'none'; checkoutBtn.style.display = 'none';
    return;
  }
  let total = 0;
  keys.forEach(k=>{
    const r = cart[k];
    total += r.price * r.qty;
    const row = document.createElement('div'); row.className='cart-row';
    row.innerHTML = `<div style="flex:1"><div style="font-weight:600">${r.name}</div><div class="muted" style="font-size:13px">â‚¹${r.price} Ã— ${r.qty}</div></div>`;
    const controls = document.createElement('div'); controls.className='qty';
    const dec = document.createElement('button'); dec.textContent='âˆ’'; dec.onclick = ()=> changeQty(k, -1);
    const num = document.createElement('div'); num.style.padding='4px 8px'; num.textContent = r.qty;
    const inc = document.createElement('button'); inc.textContent='+'; inc.onclick = ()=> changeQty(k, +1);
    controls.appendChild(dec); controls.appendChild(num); controls.appendChild(inc);
    row.appendChild(controls);
    cartList.appendChild(row);
  });
  totalRow.style.display = 'flex'; checkoutBtn.style.display = 'block';
  totalAmt.textContent = 'â‚¹' + total;
}

// persist cart locally
function saveCart(){ try{ localStorage.setItem('smdosa_cart', JSON.stringify(cart)); } catch(e){} }
function loadCart(){ try{ const s = localStorage.getItem('smdosa_cart'); if(s) cart = JSON.parse(s); } catch(e){ cart = {}; } }

// checkout placeholder
checkoutBtn.addEventListener('click', ()=>{
  const keys = Object.keys(cart);
  if(keys.length === 0) return alert('Cart is empty');
  // For now we just show a summary â€” you can integrate payment / order API later
  let summary = 'Your order:\n\n';
  let total = 0;
  keys.forEach(k => { const r = cart[k]; summary += `${r.qty} x ${r.name} â€” â‚¹${r.price * r.qty}\n`; total += r.price * r.qty; });
  summary += `\nTotal: â‚¹${total}\n\nThank you! (This is a demo checkout)`;
  alert(summary);
  // clear cart after checkout demo
  cart = {}; saveCart(); renderCart();
});

// keyboard left/right to switch categories
document.addEventListener('keydown', (e)=>{
  if(e.key === 'ArrowRight'){ activeIndex = Math.min(activeIndex + 1, MENU.categories.length - 1); renderStage(); renderTabs(); }
  if(e.key === 'ArrowLeft'){ activeIndex = Math.max(activeIndex - 1, 0); renderStage(); renderTabs(); }
});

// init
(function init(){
  loadCart();
  renderTabs();
  renderStage();
  renderCart();
})();
</script>
</body>
</html>
